"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[19],{7117:(G,y,o)=>{o.d(y,{m:()=>h});class h{get collums(){return[{id:"checkbox",name:"",width:50,type:"checkbox"},{id:"stt",name:"STT",width:50,type:"text"},{id:"StudentCode",name:"M\xe3 HS",width:100,type:"text"},{id:"LastName",name:"H\u1ecd v\xe0 t\xean",width:200,type:"text"},{id:"DOB",name:"Ng\xe0y sinh",width:100,type:"DOB"},{id:"GenderString",name:"Gi\u1edbi t\xednh",width:50,type:"text"},{id:"UserName",name:"T\xean \u0111\u0103ng nh\u1eadp",width:150,type:"text"},{id:"LocationAddress",name:"\u0110\u1ecba ch\u1ec9",width:200,type:"text"},{id:"",name:"",width:200,type:"setting",data:[{type:"edit",text:"S\u1eeda",class:"btn-edit"},{type:"delete",text:"Xo\xe1",class:"btn-delete"}]}]}get create(){return[{id:"StudentLastName",label:"H\u1ecd v\xe0 t\xean h\u1ecdc sinh",name:"StudentLastName",type:"text",required:!0,obligatory:!0},{id:"StudentEmail",label:"Email h\u1ecdc sinh ho\u1eb7c ph\u1ee5 huynh",name:"StudentEmail",required:!0,obligatory:!0,type:"text"},{id:"LastName",label:"H\u1ecd v\xe0 t\xean ph\u1ee5 huynh",name:"LastName",type:"text"},{id:"UserName",label:"T\xean \u0111\u0103ng nh\u1eadp",name:"UserName",type:"text",required:!0,obligatory:!0},{id:"DOB",label:"Ng\xe0y sinh",name:"DOB",type:"date"},{id:"gender",label:"Gi\u1edbi t\xednh",name:"StudentGender",type:"selected",data:[{value:1,name:"Nam"},{value:2,name:"N\u1eef"}]},{id:"ClassId",label:"L\u1edbp",name:"ClassId",type:"disableSelected",data:[]},{id:"Phone",label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",name:"Phone",type:"text"},{id:"StudentLocationAddress",label:"\u0110\u1ecba ch\u1ec9",name:"StudentLocationAddress",type:"textarea",required:!1,obligatory:!1}]}get btnActice(){return[{class:"btn-create",text:"+  Th\xeam",type:"create",icon:""},{class:"btn-upload",text:"Nh\u1eadp",type:"upload-file",icon:"assets/svg/icon-upload.svg"}]}get btnActiceTeacher(){return[{class:"btn-create",text:"+  Th\xeam",type:"create",icon:""}]}get detail(){return[{id:"LastName",label:"H\u1ecd v\xe0 t\xean h\u1ecdc sinh",name:"LastName",type:"text",required:!0,obligatory:!0},{id:"UserName",label:"T\xean \u0111\u0103ng nh\u1eadp",name:"UserName",type:"text"},{id:"ParentName",label:"H\u1ecd v\xe0 t\xean ph\u1ee5 huynh",name:"ParentName",type:"text"},{id:"DOB",label:"Ng\xe0y sinh",name:"DOB",type:"date"},{id:"StudentGender",label:"Gi\u1edbi t\xednh",name:"StudentGender",type:"selected",data:[],defaultValue:null},{id:"ClassId",label:"L\u1edbp",name:"ClassId",type:"disableSelected",data:[]},{id:"Email",label:"Email h\u1ecdc sinh ho\u1eb7c ph\u1ee5 huynh",name:"Email",type:"text"},{id:"LocationAddress",label:"\u0110\u1ecba ch\u1ec9",name:"LocationAddress",type:"textarea"}]}get createClass(){return[{id:"GradeId",label:"Kh\u1ed1i",name:"GradeId",type:"disableSelected",data:[]},{id:"ClassName",label:"T\xean L\u1edbp",name:"name",type:"text",required:!0}]}get collumsTeacher(){return[{id:"stt",name:"STT",width:50,type:"text"},{id:"LastName",name:"H\u1ecd v\xe0 t\xean",width:150,type:"text"},{id:"DOB",name:"Ng\xe0y sinh",width:100,type:"DOB"},{id:"GenderString",name:"Gi\u1edbi t\xednh",width:50,type:"text"},{id:"ClassName",name:"L\u1edbp",width:50,type:"text"},{id:"Phone",name:"T\xean \u0111\u0103ng nh\u1eadp",width:150,type:"text"},{id:"LocationAddress",name:"\u0110\u1ecba ch\u1ec9",width:300,type:"text"},{id:"",name:"",width:200,type:"setting",data:[{type:"edit",text:"S\u1eeda",class:"btn-edit"},{type:"delete",text:"Xo\xe1",class:"btn-delete"}]}]}get createTeacher(){return[{id:"LastName",label:"H\u1ecd v\xe0 t\xean",name:"LastName",type:"text",required:!0,obligatory:!0},{id:"Email",label:"Email",name:"email",type:"email",required:!0,obligatory:!0},{id:"DOB",label:"Ng\xe0y sinh",name:"DOB",type:"date"},{id:"Gender",label:"Gi\u1edbi t\xednh",name:"Gender",type:"selected",data:[{value:1,name:"Nam"},{value:2,name:"N\u1eef"}]},{id:"GradeId",label:"Kh\u1ed1i",name:"GradeId",type:"selectChange",data:[],required:!0},{id:"ClassId",label:"L\u1edbp",name:"ClassId",type:"selected",data:[],required:!0},{id:"UserName",label:"T\xean \u0111\u0103ng nh\u1eadp",name:"UserName",type:"text",required:!0,obligatory:!0},{id:"LocationAddress",label:"\u0110\u1ecba ch\u1ec9",name:"LocationAddress",type:"textarea"}]}get detailTeacher(){return[{id:"LastName",label:"H\u1ecd v\xe0 t\xean",name:"LastName",type:"text",required:!0},{id:"Email",label:"Email",name:"email",type:"text",required:!0},{id:"DOB",label:"Ng\xe0y sinh",name:"DOB",type:"date"},{id:"Gender",label:"Gi\u1edbi t\xednh",name:"Gender",type:"selected",data:[]},{id:"GradeId",label:"Kh\u1ed1i",name:"GradeId",type:"selectChange",data:[],required:!0},{id:"ClassId",label:"L\u1edbp",name:"ClassId",type:"selected",data:[],required:!0},{id:"Phone",label:"T\xean \u0111\u0103ng nh\u1eadp",name:"phone",type:"text",disable:!0,required:!0},{id:"TeacherCode",label:"M\xe3 gi\xe1o vi\xean",name:"TeacherCode",type:"text"},{id:"LocationAddress",label:"\u0110\u1ecba ch\u1ec9",name:"LocationAddress",type:"textarea"}]}get importDataStudent(){return[{id:"",label:"File",name:"",type:"upload-file"}]}get importDataEmployee(){return[{id:"",label:"File",name:"",type:"upload-file"}]}get btnEmployee(){return[{class:"btn-create",text:"+  Th\xeam",type:"create",icon:""},{class:"btn-upload",text:"Nh\u1eadp",type:"upload-file",icon:"assets/svg/icon-upload.svg"}]}get collumsEmployee(){return[{id:"",name:"",width:50,type:"checkbox"},{id:"stt",name:"STT",width:50,type:"text"},{id:"LastName",name:"H\u1ecd v\xe0 t\xean",width:150,type:"text"},{id:"UserName",name:"T\xean \u0111\u0103ng nh\u1eadp",width:120,type:"text"},{id:"GradeName",name:"Kh\u1ed1i",width:100,type:"text"},{id:"SubjectName",name:"M\xf4n",width:100,type:"text"},{id:"GenderString",name:"Gi\u1edbi t\xednh",width:100,type:"text"},{id:"DOB",name:"Ng\xe0y sinh",width:100,type:"text"},{id:"LocationAddress",name:"\u0110\u1ecba ch\u1ec9",width:150,type:"text"},{id:"",name:"",width:130,type:"setting",data:[{type:"edit",text:"S\u1eeda",class:"btn-edit"},{type:"delete",text:"Xo\xe1",class:"btn-delete"}]}]}get createEmployee(){return[{id:"LastName",label:"H\u1ecd v\xe0 t\xean",name:"LastName",type:"text",required:!0},{id:"Phone",label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",name:"phone",type:"text"},{id:"UserName",label:"T\xean \u0111\u0103ng nh\u1eadp",name:"UserName",type:"text",required:!0},{id:"Email",label:"Email",name:"Email",type:"email",required:!0},{id:"DOB",label:"Ng\xe0y sinh",name:"DOB",type:"date"},{id:"Gender",label:"Gi\u1edbi t\xednh",name:"Gender",type:"selected",data:[]},{id:"GradeId",label:"Kh\u1ed1i",name:"GradeId",type:"selectChange",data:[]},{id:"SubjectId",label:"M\xf4n h\u1ecdc",name:"SubjectId",type:"selected",data:[]},{id:"LocationAddress",label:"\u0110\u1ecba ch\u1ec9",name:"LocationAddress",type:"textarea"}]}get editEmployee(){return[{id:"LastName",label:"H\u1ecd v\xe0 t\xean",name:"LastName",type:"text",required:!0},{id:"UserName",label:"T\xean \u0111\u0103ng nh\u1eadp",name:"UserName",type:"text",required:!0},{id:"DOB",label:"Ng\xe0y sinh",name:"DOB",type:"date"},{id:"Gender",label:"Gi\u1edbi t\xednh",name:"Gender",type:"selected",data:[],defaultValue:""},{id:"GradeId",label:"Kh\u1ed1i",name:"GradeId",type:"selectChange",data:[],defaultValue:""},{id:"SubjectId",label:"M\xf4n h\u1ecdc",name:"SubjectId",type:"selectChange",data:[],defaultValue:""},{id:"LocationAddress",label:"\u0110\u1ecba ch\u1ec9",name:"LocationAddress",type:"textarea"}]}get btnAdmin(){return[{class:"btn-create",text:"+  G\xe1n ch\u1ee9c v\u1ee5",type:"create",icon:""}]}get collumsAdmin(){return[{id:"stt",name:"STT",width:50,type:"text"},{id:"LastName",name:"H\u1ecd v\xe0 t\xean",width:150,type:"text"},{id:"DOB",name:"Ng\xe0y sinh",width:100,type:"text"},{id:"Gender",name:"Gi\u1edbi t\xednh",width:150,type:"text"},{id:"Phone",name:"T\xean \u0111\u0103ng nh\u1eadp",width:150,type:"text"},{id:"LocationAddress",name:"\u0110\u1ecba ch\u1ec9",width:300,type:"text"},{id:"",name:"",width:200,type:"setting",data:[{type:"edit",text:"S\u1eeda",class:"btn-edit"},{type:"delete",text:"Xo\xe1",class:"btn-delete"}]}]}get editUser(){return[{id:"LastName",label:"H\u1ecd v\xe0 t\xean",name:"LastName",type:"text",required:!0,obligatory:!0},{id:"Email",label:"Email",name:"Email",required:!0,obligatory:!0,type:"text"},{id:"ParentLastName",label:"H\u1ecd v\xe0 t\xean ph\u1ee5 huynh",name:"ParentLastName",type:"text"},{id:"UserName",label:"T\xean \u0111\u0103ng nh\u1eadp",name:"UserName",type:"text",required:!0,obligatory:!0},{id:"DOB",label:"Ng\xe0y sinh",name:"DOB",type:"date"},{id:"Gender",label:"Gi\u1edbi t\xednh",name:"Gender",type:"selectChange",data:[{value:1,name:"Nam"},{value:2,name:"N\u1eef"}]},{id:"Phone",label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",name:"Phone",type:"text"},{id:"LocationAddress",label:"\u0110\u1ecba ch\u1ec9",name:"LocationAddress",type:"textarea",required:!1,obligatory:!1}]}get configRoom(){return[{id:"RoomName",label:"T\xean ph\xf2ng",name:"RoomName",type:"text",required:!0,obligatory:!0}]}}},7019:(G,y,o)=>{o.r(y),o.d(y,{MemberModule:()=>oe});var h=o(6814),g=o(8109),k=o(5861),p=o(7117),s=o(7700),W=o(3519),d=o.n(W),e=o(5879),w=o(2371),b=o(5187),C=o(4571);let $=(()=>{class n{constructor(t,i,a){this.dialogRef=t,this.data=i,this.memberService=a,this.conFig=new p.m,this.dataModel={},this.checkFile={},this.error=[],this.option={title:"Th\xeam h\u1ecdc sinh m\u1edbi",type:"create"},this.arrayButton=[{class:"btn-cancel",text:"H\u1ee7y b\u1ecf"},{class:"btn-save",text:"X\xe1c nh\u1eadn"}],this.listCreate=[]}ngOnInit(){this.listCreate=this.conFig.create,this.dataModel={ClassName:this.data.name,ClassId:this.data._id,StudentGender:1},this.listCreate[6].data=[{value:this.data._id,name:this.data.name}],console.log("\u0111hdh",this.listCreate)}handleCallbackEvent(t){t.item.StudentGender=+t.item.StudentGender,"btn-save"===t.btn.class&&this.memberService.createStudent({email:t.item.StudentEmail,class_id:t.item.ClassId,full_name:t.item.StudentLastName,user_name:t.item.UserName,gender:t.item.StudentGender,phone:t.item.Phone,dob:t.item.DOB,address:t.item.StudentLocationAddress,parent_name:t.item.LastName}).subscribe(i=>{d().fire({position:"center",icon:"success",title:"Th\xeam h\u1ecdc sinh th\xe0nh c\xf4ng!",showConfirmButton:!1,timer:1500}),this.dialogRef.close()},i=>{d().fire({position:"center",icon:"error",title:i.error.message,showConfirmButton:!1,timer:1500})}),"btn-cancel"===t.btn.class&&this.dialogRef.close()}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(s.so),e.Y36(s.WI),e.Y36(w.n))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-member"]],decls:2,vars:6,consts:[[3,"data","option","error","dataModel","arrayButton","checkFile","dataChange","optionChange","errorChange","dataModelChange","arrayButtonChange","checkFileChange","callback"]],template:function(i,a){1&i&&(e._UZ(0,"app-loader"),e.TgZ(1,"app-create-form",0),e.NdJ("dataChange",function(l){return a.listCreate=l})("optionChange",function(l){return a.option=l})("errorChange",function(l){return a.error=l})("dataModelChange",function(l){return a.dataModel=l})("arrayButtonChange",function(l){return a.arrayButton=l})("checkFileChange",function(l){return a.checkFile=l})("callback",function(l){return a.handleCallbackEvent(l)}),e.qZA()),2&i&&(e.xp6(1),e.Q6J("data",a.listCreate)("option",a.option)("error",a.error)("dataModel",a.dataModel)("arrayButton",a.arrayButton)("checkFile",a.checkFile))},dependencies:[b.I,C.R]})}return n})();var S=o(402);let tt=(()=>{class n{constructor(t,i,a,c){this.formatDate=t,this.dialogRef=i,this.memberService=a,this.data=c,this.conFig=new p.m,this.dataModel={},this.option={title:"S\u1eeda th\xf4ng tin h\u1ecdc sinh",type:"create"},this.arrayButton=[{class:"btn-cancel",text:"H\u1ee7y b\u1ecf"},{class:"btn-save",text:"X\xe1c nh\u1eadn"}],this.listCreate=[]}ngOnInit(){console.log(this.data),this.listCreate=this.conFig.detail,this.dataModel={LastName:this.data.account.full_name,UserName:this.data.account.user_name,ParentName:this.data.parent_name,Email:this.data.account.email,DOB:this.formatDate.formatDate(this.data.account.birth_day,"YYYY-MM-DD"),ClassId:this.data.class_id,LocationAddress:this.data.address,StudentGender:this.data.account.gender},this.listCreate[5].data=[{value:this.data.class._id,name:this.data.class.name}],this.listCreate[4].data=[{value:1,name:"Nam"},{value:2,name:"N\u1eef"}]}handleCallbackEvent(t){t.item.StudentGender=+t.item.StudentGender,t.item.ParentLastname=t.item.ParentName,"btn-save"===t.btn.class&&this.memberService.editStudent(this.data._id,{account_id:this.data.account_id,email:t.item.StudentEmail,class_id:t.item.ClassId,full_name:t.item.StudentLastName,user_name:t.item.UserName,gender:t.item.StudentGender,phone:t.item.Phone,dob:t.item.DOB,address:t.item.LocationAddress,parent_name:t.item.LastName}).subscribe(i=>{d().fire({position:"center",icon:"success",title:"S\u1eeda th\xf4ng tin h\u1ecdc sinh th\xe0nh c\xf4ng!!",showConfirmButton:!1,timer:1500}),this.dialogRef.close()},i=>{d().fire({position:"center",icon:"error",title:i.error.message,showConfirmButton:!1,timer:1500}),this.dialogRef.close()}),"btn-cancel"===t.btn.class&&this.dialogRef.close()}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(S.u),e.Y36(s.so),e.Y36(w.n),e.Y36(s.WI))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-member"]],decls:2,vars:4,consts:[[3,"data","dataModel","option","arrayButton","dataChange","dataModelChange","optionChange","arrayButtonChange","callback"]],template:function(i,a){1&i&&(e._UZ(0,"app-loader"),e.TgZ(1,"app-create-form",0),e.NdJ("dataChange",function(l){return a.listCreate=l})("dataModelChange",function(l){return a.dataModel=l})("optionChange",function(l){return a.option=l})("arrayButtonChange",function(l){return a.arrayButton=l})("callback",function(l){return a.handleCallbackEvent(l)}),e.qZA()),2&i&&(e.xp6(1),e.Q6J("data",a.listCreate)("dataModel",a.dataModel)("option",a.option)("arrayButton",a.arrayButton))},dependencies:[b.I,C.R]})}return n})();var A=o(1486);let et=(()=>{class n{constructor(t){this.dialoRef=t,this.conFig=new p.m,this.dataModel={},this.checkFile={type:"download",Url:"assets/files/student_list.xlsx"},this.option={title:"Import h\u1ecdc sinh",type:"create"},this.arrayButton=[{class:"btn-cancel",text:"H\u1ee7y b\u1ecf"},{class:"btn-save",text:"L\u01b0u"}],this.listCreate=[]}ngOnInit(){this.listCreate=this.conFig.importDataStudent}handleCallbackEvent(t){"btn-save"===t.btn.class&&this.dialoRef.close(t),"btn-cancel"===t.btn.class&&this.dialoRef.close(null)}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(s.so))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-import-student"]],decls:1,vars:4,consts:[[3,"data","option","arrayButton","checkFile","dataChange","optionChange","arrayButtonChange","checkFileChange","callback"]],template:function(i,a){1&i&&(e.TgZ(0,"app-create-form",0),e.NdJ("dataChange",function(l){return a.listCreate=l})("optionChange",function(l){return a.option=l})("arrayButtonChange",function(l){return a.arrayButton=l})("checkFileChange",function(l){return a.checkFile=l})("callback",function(l){return a.handleCallbackEvent(l)}),e.qZA()),2&i&&e.Q6J("data",a.listCreate)("option",a.option)("arrayButton",a.arrayButton)("checkFile",a.checkFile)},dependencies:[b.I]})}return n})();var R=o(6676),Z=o(2113),u=o(7954),M=o(436);let it=(()=>{class n{constructor(t,i,a,c,l,m){this.dialog=t,this.activeRouter=i,this.memberService=a,this.exportService=c,this.schoolGradeLevel=l,this.formatDate=m,this.config=new p.m,this.listActive=[],this.dataModel={},this.data=[],this.listStudentError=[],this.user=JSON.parse(localStorage.getItem("access_user"))}ngOnInit(){this.classId=this.activeRouter.snapshot.params.classId,this.getListStudentOfClass(),this.tableData=this.config.collums,"ADMIN"==this.user.role_key||"TEACHER"==this.user.role_key?this.listActive=this.config.btnActice:this.tableData=this.tableData.filter(t=>"UserName"!==t.id&&"checkbox"!==t.id&&"setting"!==t.type),this.schoolGradeLevel.getClassById(this.classId).subscribe(t=>{this.classDetail=t})}getListStudentOfClass(){this.memberService.getListStudentClass(this.classId).subscribe(t=>{null!==t&&(this.data=t.original,this.data.forEach((i,a)=>{i.GenderString=1==i.account.gender?"Nam":"N\u1eef",i.ClassName=i.class.name,i.StudentCode=i.student_code,("ADMIN"==this.user.role_key||"TEACHER"==this.user.role_key)&&(i.UserName=i.account.user_name),i.LocationAddress=i.address,i.LastName=i.account.full_name,i.DOB=i.account.birth_day?this.formatDate.formatDate(i.account.birth_day,"YYYY-MM-DD"):null,i.stt=a+1}))})}incomingfile(t){let i=new FileReader;t&&(this.file=t.target.files[0],i.onload=a=>{this.arrayBuffer=i.result;for(var c=new Uint8Array(this.arrayBuffer),l=new Array,m=0;m!=c.length;++m)l[m]=String.fromCharCode(c[m]);var f=l.join(""),_=A.ij(f,{type:"binary"});this.dataImport=A.P6.sheet_to_json(_.Sheets[_.SheetNames[0]],{raw:!0}),this.handleDataImport(this.dataImport)},i.readAsArrayBuffer(this.file))}exportErrorStudentExcel(t){this.exportService.exportExcel(t,"danh sach hoc sinh loi import")}handleDataImport(t){let i=t.map(a=>({class_id:this.classId,full_name:a["H\u1ecd v\xe0 t\xean"],email:a.Email,user_name:a["T\xean \u0111\u0103ng nh\u1eadp"],gender:"Nam"==a["Gi\u1edbi t\xednh"]?1:2,phone:a.S\u0110T,dob:R(a["Ng\xe0y sinh"],"DD/MM/YYYY").format("YYYY-MM-DD"),address:a["\u0110\u1ecba ch\u1ec9"]}));this.memberService.createManyStudent(i).subscribe()}createStudentImport(t){var i=this;return(0,k.Z)(function*(){i.listStudentError=[];for(let a=0;a<t.length;a++){let c=t[a];i.memberService.createStudent(c).subscribe(l=>{},l=>{i.getListStudentOfClass(),i.listStudentError.push(c),a===t.length-1&&d().fire({title:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ee5 huynh b\u1ecb tr\xf9ng, vui l\xf2ng ki\u1ec3m tra l\u1ea1i!",icon:"info",showCloseButton:!0,showCancelButton:!0,focusConfirm:!1,confirmButtonText:"T\u1ea3i xu\u1ed1ng danh s\xe1ch h\u1ecdc sinh b\u1ecb tr\xf9ng",cancelButtonText:"H\u1ee7y"}).then(function(){var m=(0,k.Z)(function*(f){f.isConfirmed&&(i.listStudentError=i.listStudentError.map(_=>({"H\u1ecd v\xe0 t\xean":_.StudentLastName,"T\xean \u0111\u0103ng nh\u1eadp":_.Phone,"Ng\xe0y sinh":_.DOB,"Gi\u1edbi t\xednh":1===_.StudentGender?"Nam":"N\u1eef","M\xe3 h\u1ecdc sinh":_.StudentCode,"\u0110\u1ecba ch\u1ec9":_.StudentLocationAddress,"S\u0110T h\u1ecdc sinh":_.StudentPhone,L\u1edbp:_.ClassName})),i.exportErrorStudentExcel(i.listStudentError))});return function(f){return m.apply(this,arguments)}}())},()=>{a===t.length-1&&i.getListStudentOfClass()})}})()}handleTableCallback(t){var i=this;return"create"===t.type?this.dialog.open($,{width:"500px",height:"750px",disableClose:!0,data:this.classDetail}).afterClosed().subscribe(a=>{this.getListStudentOfClass()}):"edit"===t.type?this.dialog.open(tt,{width:"500px",height:"750px",disableClose:!0,data:t.item}).afterClosed().subscribe(a=>{this.getListStudentOfClass()}):"upload-file"===t.type?this.dialog.open(et,{width:"500px",height:"300px",disableClose:!0,data:t.item}).afterClosed().subscribe(a=>{null!==a&&this.incomingfile(a.file)}):("delete-all"===t.type&&d().fire({text:"B\u1ea1n mu\u1ed1n xo\xe1 h\u1ecdc sinh n\xe0y kh\xf4ng?",showCancelButton:!0,cancelButtonColor:"#3085d6",confirmButtonColor:"#d33",cancelButtonText:"Hu\u1ef7",confirmButtonText:"Xo\xe1"}).then(function(){var a=(0,k.Z)(function*(c){if(c.isConfirmed){for(let l=0;l<t.item.length;l++)"Success"===(yield i.memberService.deleteAllStudent(t.item[l].StudentId)).Message&&i.getListStudentOfClass();yield d().fire({position:"center",icon:"success",title:"Xo\xe1 th\xe0nh c\xf4ng!",showConfirmButton:!1,timer:1500})}});return function(c){return a.apply(this,arguments)}}()),void("delete"===t.type&&d().fire({text:"B\u1ea1n mu\u1ed1n xo\xe1 h\u1ecdc sinh n\xe0y kh\xf4ng?",showCancelButton:!0,cancelButtonColor:"#3085d6",confirmButtonColor:"#d33",cancelButtonText:"Hu\u1ef7",confirmButtonText:"Xo\xe1"}).then(a=>{a.isConfirmed&&this.memberService.deleteStudent(t.item._id).subscribe(c=>{d().fire({position:"center",icon:"success",title:"Xo\xe1 h\u1ecdc sinh th\xe0nh c\xf4ng!",showConfirmButton:!1,timer:1500}),this.getListStudentOfClass()})})))}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(s.uw),e.Y36(g.gz),e.Y36(w.n),e.Y36(Z.d),e.Y36(u.a),e.Y36(S.u))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-member-list-table"]],decls:5,vars:4,consts:[[1,"member-detail"],[1,"title"],[3,"data","tableData","listActive","callback"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"app-table",2),e.NdJ("callback",function(l){return a.handleTableCallback(l)}),e.qZA()()),2&i&&(e.xp6(2),e.hij("L\u1edaP: ",null==a.classDetail?null:a.classDetail.name,""),e.xp6(2),e.Q6J("data",a.data)("tableData",a.tableData)("listActive",a.listActive))},dependencies:[M.a],styles:[".title[_ngcontent-%COMP%]{font-weight:700;font-size:26px}"]})}return n})(),at=(()=>{class n{constructor(t,i,a){this.schoolService=t,this.dialogRef=i,this.data=a,this.conFig=new p.m,this.dataModel={},this.option={title:"Th\xeam l\u1edbp m\u1edbi",type:"create"},this.arrayButton=[{class:"btn-cancel",text:"H\u1ee7y b\u1ecf"},{class:"btn-save",text:"X\xe1c nh\u1eadn"}],this.listCreate=[]}ngOnChanges(){}ngOnInit(){this.dataModel=this.data,this.listCreate=this.conFig.createClass,this.listCreate[0].data=[{name:this.data.name,value:this.data.grade_id}]}handleCallbackEvent(t){"btn-cancel"===t.btn.class&&(console.log(t),this.dialogRef.close(null)),"btn-save"===t.btn.class&&(this.schoolService.createClass({grade_id:t.item._id,class_name:t.item.ClassName}).subscribe(a=>{}),this.dialogRef.close(t.item)),t.item.ClassName=null}handleDeleteCallBack(t){}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(u.a),e.Y36(s.so),e.Y36(s.WI))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-class-create"]],features:[e.TTD],decls:2,vars:4,consts:[[3,"data","option","dataModel","arrayButton","dataChange","optionChange","dataModelChange","arrayButtonChange","callback","callbackDelete"]],template:function(i,a){1&i&&(e._UZ(0,"app-loader"),e.TgZ(1,"app-create-form",0),e.NdJ("dataChange",function(l){return a.listCreate=l})("optionChange",function(l){return a.option=l})("dataModelChange",function(l){return a.dataModel=l})("arrayButtonChange",function(l){return a.arrayButton=l})("callback",function(l){return a.handleCallbackEvent(l)})("callbackDelete",function(l){return a.handleDeleteCallBack(l)}),e.qZA()),2&i&&(e.xp6(1),e.Q6J("data",a.listCreate)("option",a.option)("dataModel",a.dataModel)("arrayButton",a.arrayButton))},dependencies:[b.I,C.R]})}return n})();var F=o(5940),T=o(57);function nt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.createClass())}),e._uU(1,"+ Th\xeam L\u1edbp"),e.qZA()}}function lt(n,r){1&n&&(e.TgZ(0,"div",7),e._UZ(1,"mat-spinner",8),e.qZA()),2&n&&(e.xp6(1),e.Q6J("diameter",20))}let Y=(()=>{class n{constructor(t,i,a,c){this.activeRouter=t,this.router=i,this.dialog=a,this.schoolLevelGrade=c,this.results=[],this.spinner=!1,this.onSearchKey=l=>{clearTimeout(this.timer),this.timer=setTimeout(()=>{this.spinner=!0,this.searchMember(l).subscribe(m=>{this.data=m,this.spinner=!1})},500)}}ngOnInit(){var t=this;return(0,k.Z)(function*(){t.gradeId=t.activeRouter.snapshot.params.gradeId,t.user_id=t.activeRouter.snapshot.params.user_id,t.gradeId&&(yield t.schoolLevelGrade.getClassOfGrade(t.gradeId).subscribe(i=>{t.data=i}),t.getGrade()),t.user_id&&(yield t.schoolLevelGrade.getClassOfGrade(t.gradeId,t.user_id).subscribe(i=>{t.data=i}))})()}getGrade(){this.schoolLevelGrade.getGradeOfGradeKey(this.gradeId).subscribe(t=>{this.listGrade=t.find(i=>i.grade_infor.grade_key===this.gradeId).grade_infor})}createClass(){this.dialog.open(at,{disableClose:!0,data:this.listGrade}).afterClosed().subscribe(t=>{this.schoolLevelGrade.getClassOfGrade(this.gradeId).subscribe(i=>{this.data=i})})}routerTo(t){this.router.navigate([`/main/member/member-home/class/${t._id}`])}delete(t){d().fire({text:"B\u1ea1n mu\u1ed1n xo\xe1 l\u1edbp n\xe0y kh\xf4ng?",showCancelButton:!0,cancelButtonColor:"#3085d6",confirmButtonColor:"#d33",cancelButtonText:"Hu\u1ef7",confirmButtonText:"Xo\xe1"}).then(i=>{i.isConfirmed&&this.schoolLevelGrade.deleteClass(t._id).subscribe(a=>{d().fire({position:"center",icon:"success",title:"Xo\xe1 l\u1edbp th\xe0nh c\xf4ng!",showConfirmButton:!1,timer:1500}),this.schoolLevelGrade.getClassOfGrade(this.gradeId).subscribe(c=>{this.data=c})},a=>{d().fire({position:"center",icon:"error",title:a.error.message,showConfirmButton:!1,timer:1500})})})}searchMember(t){return this.schoolLevelGrade.getClassOfGrade(this.gradeId,this.user_id,t)}setDefaultImg(t){t.MediaURL="assets/img/default-avatar.jpg"}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(g.gz),e.Y36(g.F0),e.Y36(s.uw),e.Y36(u.a))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-member-home-class"]],decls:9,vars:4,consts:[[1,"header"],["class","btn-create create",3,"click",4,"ngIf"],[1,"search-filter"],["class","spinner",4,"ngIf"],["type","search","placeholder","T\xecm ki\u1ebfm l\u1edbp h\u1ecdc","name","","id","",1,"search",3,"input"],[3,"dataCard","showIcon","callback","callbackDelete"],[1,"btn-create","create",3,"click"],[1,"spinner"],[3,"diameter"]],template:function(i,a){1&i&&(e.TgZ(0,"div")(1,"div",0),e._uU(2," L\u1edaP "),e.YNc(3,nt,2,0,"button",1),e.TgZ(4,"div",2),e.YNc(5,lt,2,1,"div",3),e.TgZ(6,"input",4),e.NdJ("input",function(l){return a.onSearchKey(l.target.value)}),e.qZA()()(),e._UZ(7,"br"),e.TgZ(8,"app-base-card",5),e.NdJ("callback",function(l){return a.routerTo(l)})("callbackDelete",function(l){return a.delete(l)}),e.qZA()()),2&i&&(e.xp6(3),e.Q6J("ngIf",!a.user_id),e.xp6(2),e.Q6J("ngIf",a.spinner),e.xp6(3),e.Q6J("dataCard",a.data)("showIcon",!a.user_id))},dependencies:[h.O5,F.Ou,T.H],styles:[".header[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:26px;font-weight:700}.header[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]{font-size:1.5rem;margin-left:20px;padding-left:20px;padding-right:20px;width:max-content}.header[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]{position:relative}.header[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.header[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:50px;height:35px;width:300px;outline:none;border-radius:20px;border:1px solid #848484;padding:0 15px}.header[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .list-result[_ngcontent-%COMP%]{position:absolute;max-height:300px;overflow:auto;width:100%;left:50px;border:1px solid #848484;z-index:999;background-color:#f8f8f8}.header[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .list-result[_ngcontent-%COMP%]   .student-detail[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;background-color:#fff;margin:10px;border-radius:19px}.header[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .list-result[_ngcontent-%COMP%]   .student-detail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;padding:10px}.header[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .list-result[_ngcontent-%COMP%]   .student-detail[_ngcontent-%COMP%]   .info-student[_ngcontent-%COMP%]{font-size:14px}"]})}return n})(),ct=(()=>{class n{constructor(t,i,a){this.getrouter=t,this.router=i,this.levelGradeClassService=a,this.data=[]}ngOnInit(){this.schoolLevelId=this.getrouter.snapshot.params.schoolLevelId,this.getListGrade()}routerTo(t){this.router.navigate([`/main/member/member-home/list-class/${t.grade_key}`])}getListGrade(){this.levelGradeClassService.getGradeOfLevel(this.schoolLevelId).subscribe(t=>{this.data=t}),this.levelGradeClassService.getGradeStatic().subscribe(t=>{t.map(i=>{const a=this.data.findIndex(c=>c._id==i._id);a>-1&&(this.data[a].studentCount=i.studentCount,this.data[a].classCount=i.classCount)})})}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(g.gz),e.Y36(g.F0),e.Y36(u.a))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-member-home-group"]],decls:5,vars:1,consts:[[1,"member-home"],[1,"title"],[3,"dataCard","callback"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," KH\u1ed0I "),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"app-base-card",2),e.NdJ("callback",function(l){return a.routerTo(l)}),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("dataCard",a.data))},dependencies:[T.H],styles:[".member-home[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:26px}"]})}return n})();var B=o(9862),dt=o(7398);function ot(n,r){1&n&&(e.TgZ(0,"div",8),e._UZ(1,"mat-spinner",9),e.qZA()),2&n&&(e.xp6(1),e.Q6J("diameter",20))}function rt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.clickStudent(c))}),e.TgZ(1,"img",13),e.NdJ("error",function(){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.setDefaultImg(c))}),e.qZA(),e.TgZ(2,"div",14)(3,"span"),e._uU(4),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"span"),e._uU(7),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"span"),e._uU(10),e.qZA()()()}if(2&n){const t=r.$implicit;e.xp6(1),e.Q6J("src",t.MediaURL,e.LSH),e.xp6(3),e.Oqu(t.full_name),e.xp6(3),e.hij("L\u1edbp: ",t.class.name,""),e.xp6(3),e.hij("M\xe3 HS: ",t.student_code,"")}}function st(n,r){if(1&n&&(e.TgZ(0,"div",10),e.YNc(1,rt,11,4,"div",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.results)}}function mt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"app-base-card",15),e.NdJ("callback",function(a){e.CHM(t);const c=e.oxw();return e.KtG(c.routerSchoolLevel(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("check",!0)("dataCard",t.school)}}let ht=(()=>{class n{constructor(t,i,a,c,l){this.levelService=t,this.router=i,this.memberService=a,this.http=c,this.handle=l,this.school=[],this.results=[],this.check=!0,this.listLevel=[],this.spinner=!1,this.httpSearchStudent="",this.onSearchKey=m=>{m?(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.spinner=!0,this.searchMember(m).subscribe(f=>{this.results=f.original,this.spinner=!1})},500)):this.results=[]},this.http=new B.eN(l)}ngOnInit(){const t=JSON.parse(localStorage.getItem("access_user"));this.memberService.getTeacherUserName().subscribe(i=>{console.log(i),"TEACHER"==t.role_key?this.router.navigateByUrl(`/main/member/member-home/class/${i.class_id}`):"ADMIN"==t.role_key?this.getListLevel():this.router.navigateByUrl(`/main/member/member-home/list-class/user/${i._id}`)})}searchMember(t){return this.memberService.getListStudent(t).pipe((0,dt.U)(i=>i))}getUserGroup(){const t=JSON.parse(localStorage.getItem("access_user"));this.levelService.getEmployeeStatic().subscribe(i=>{console.log(i),"STUDENTS"!==t.role_key&&(this.school=[{Description:"qu\u1ea3n l\xfd nh\xe0 tr\u01b0\u1eddng",name:"Nh\xe0 tr\u01b0\u1eddng",classCount:2,studentCount:i}])})}setDefaultImg(t){t.MediaURL="assets/img/default-avatar.jpg"}getAllStudent(){this.memberService.searchMember("","").subscribe(t=>{})}routerTo(t){this.router.navigateByUrl(`/main/member/member-home/list-grade/${t.level_key}`)}routerSchoolLevel(t){this.router.navigateByUrl("/main/member/member-home/school-group-member")}clickStudent(t){this.router.navigateByUrl(`/main/member/member-home/class/${t.class_id}`)}getListLevel(){this.levelService.getListLevelPrivilege().subscribe(t=>{this.listLevel=t.filter(a=>a.level_key),t.find(a=>!a.level_key)&&this.getUserGroup()})}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(u.a),e.Y36(g.F0),e.Y36(w.n),e.Y36(B.eN),e.Y36(B.jN))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-member-home"]],decls:11,vars:4,consts:[[1,"member-home"],[1,"title"],[1,"search-filter"],["class","spinner",4,"ngIf"],["type","search","placeholder","T\xecm ki\u1ebfm h\u1ecdc sinh","name","","id","",1,"search",3,"input"],["class","list-result",4,"ngIf"],[3,"check","dataCard","callback",4,"ngIf"],[3,"dataCard","dataCardChange","callback"],[1,"spinner"],[3,"diameter"],[1,"list-result"],["class","student-detail",3,"click",4,"ngFor","ngForOf"],[1,"student-detail",3,"click"],["alt","","srcset","",3,"src","error"],[1,"info-student"],[3,"check","dataCard","callback"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"C\u1ea4P H\u1eccC "),e.TgZ(3,"div",2),e.YNc(4,ot,2,1,"div",3),e.TgZ(5,"input",4),e.NdJ("input",function(l){return a.onSearchKey(l.target.value)}),e.qZA(),e.YNc(6,st,2,1,"div",5),e.qZA()(),e._UZ(7,"br")(8,"br"),e.YNc(9,mt,1,2,"app-base-card",6),e.TgZ(10,"app-base-card",7),e.NdJ("dataCardChange",function(l){return a.listLevel=l})("callback",function(l){return a.routerTo(l)}),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("ngIf",a.spinner),e.xp6(2),e.Q6J("ngIf",a.results.length>0),e.xp6(3),e.Q6J("ngIf",!0===a.check),e.xp6(1),e.Q6J("dataCard",a.listLevel))},dependencies:[h.sg,h.O5,F.Ou,T.H],styles:[".member-home[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:26px;display:flex;align-items:center}.member-home[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]{position:relative}.member-home[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.member-home[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:50px;height:35px;width:300px;outline:none;border-radius:20px;border:1px solid #848484;padding:0 15px}.member-home[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .list-result[_ngcontent-%COMP%]{position:absolute;max-height:300px;overflow:auto;width:100%;left:50px;border:1px solid #848484;z-index:999;background-color:#f8f8f8}.member-home[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .list-result[_ngcontent-%COMP%]   .student-detail[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;background-color:#fff;margin:10px;border-radius:19px}.member-home[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .list-result[_ngcontent-%COMP%]   .student-detail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;padding:10px}.member-home[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .list-result[_ngcontent-%COMP%]   .student-detail[_ngcontent-%COMP%]   .info-student[_ngcontent-%COMP%]{font-size:14px}"]})}return n})(),pt=(()=>{class n{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-member"]],decls:1,vars:0,template:function(i,a){1&i&&e._UZ(0,"router-outlet")},dependencies:[g.lC],encapsulation:2})}return n})();var L=o(756);let gt=(()=>{class n{constructor(t,i,a){this.levelService=t,this.router=i,this.roleService=a,this.school=[{name:"Gi\xe1o vi\xean b\u1ed9 m\xf4n",Type:"Employee",studentCount:3},{name:"Gi\xe1o vi\xean ch\u1ee7 nhi\u1ec7m",Type:"Teacher",studentCount:3}],this.role=[],this.listLevel=[]}ngOnInit(){this.getListLevel(),this.getListRole()}getListRole(){}routerTo(t){console.log(t),"Teacher"===t.Type&&this.router.navigateByUrl("/main/member/member-home/school-group-member/teacher"),"Admin"===t.Type&&(console.log(t),this.router.navigateByUrl("/main/member/member-home/school-group-member/admin")),"Employee"===t.Type&&this.router.navigateByUrl("/main/member/member-home/school-group-member/employee"),"Role"===t.Type&&this.router.navigateByUrl(`/main/member/member-home/school-group-member/role/${t.RoleId}`)}handleEvent(t){console.log(t)}getListLevel(){}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(u.a),e.Y36(g.F0),e.Y36(L.N))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-school-group-member"]],decls:7,vars:2,consts:[[1,"member-home"],[1,"title"],[3,"dataCard","callback"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"NH\xd3M NH\xc0 TR\u01af\u1edcNG"),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"app-base-card",2),e.NdJ("callback",function(l){return a.routerTo(l)}),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"app-base-card",2),e.NdJ("callback",function(l){return a.routerTo(l)}),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("dataCard",a.school),e.xp6(2),e.Q6J("dataCard",a.role))},dependencies:[T.H],styles:[".member-home[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:26px}"]})}return n})(),_t=(()=>{class n{constructor(t,i,a,c){this.memberService=t,this.schoolLevelGrade=i,this.dialogRef=a,this.data=c,this.conFig=new p.m,this.error=[],this.option={title:"Th\xeam gi\xe1o vi\xean m\u1edbi",type:"create"},this.arrayButton=[{class:"btn-cancel",text:"H\u1ee7y b\u1ecf"},{class:"btn-save",text:"X\xe1c nh\u1eadn"}],this.listCreate=[]}ngOnInit(){this.listCreate=this.conFig.createTeacher,this.getGrade()}getClassOfGrade(t){this.schoolLevelGrade.getClassOfGrade(t).subscribe(i=>{this.listCreate[5].data=i.map(a=>({value:a._id,name:a.name}))})}getGrade(){this.schoolLevelGrade.getGrade("all").subscribe(t=>{this.listCreate[4].data=t.map(i=>({value:i.grade_key,name:i.name}))})}callBackHandle(t){"select-data"===t.type?(this.getClassOfGrade(t.item.GradeId),this.dataModel=t.item,console.log(this.dataModel)):(this.dataModel=t.item,console.log(this.dataModel))}handleCallbackEvent(t){"btn-cancel"===t.btn.class&&this.dialogRef.close(null),"btn-save"===t.btn.class&&(console.log(t.item),t.item.Gender=+t.item.Gender,t.item.usertype=2,this.memberService.createTeacher({email:t.item.Email,class_id:t.item.ClassId,full_name:t.item.LastName,user_name:t.item.UserName,gender:t.item.Gender,phone:t.item.Phone,dob:t.item.DOB,address:t.item.LocationAddress,parent_name:t.item.LastName}).subscribe(i=>{console.log(i),d().fire({position:"center",icon:"success",title:"Th\xeam gi\xe1o vi\xean th\xe0nh c\xf4ng!",showConfirmButton:!1,timer:1500}),this.dialogRef.close()},i=>{this.error=!1===i.error.Ok?i.error.Message:i.error.ModelState[""]},()=>{}))}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(w.n),e.Y36(u.a),e.Y36(s.so),e.Y36(s.WI))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-teacher"]],decls:2,vars:5,consts:[[3,"data","option","dataModel","error","arrayButton","dataChange","optionChange","dataModelChange","errorChange","arrayButtonChange","callback","handleSelectChange"]],template:function(i,a){1&i&&(e._UZ(0,"app-loader"),e.TgZ(1,"app-create-form",0),e.NdJ("dataChange",function(l){return a.listCreate=l})("optionChange",function(l){return a.option=l})("dataModelChange",function(l){return a.dataModel=l})("errorChange",function(l){return a.error=l})("arrayButtonChange",function(l){return a.arrayButton=l})("callback",function(l){return a.handleCallbackEvent(l)})("handleSelectChange",function(l){return a.callBackHandle(l)}),e.qZA()),2&i&&(e.xp6(1),e.Q6J("data",a.listCreate)("option",a.option)("dataModel",a.dataModel)("error",a.error)("arrayButton",a.arrayButton))},dependencies:[b.I,C.R]})}return n})(),bt=(()=>{class n{constructor(t,i,a,c){this.memberService=t,this.schoolLevelGrade=i,this.dialogRef=a,this.data=c,this.conFig=new p.m,this.dataModel={},this.option={title:"S\u1eeda gi\xe1o vi\xean m\u1edbi",type:"create"},this.arrayButton=[{class:"btn-cancel",text:"H\u1ee7y b\u1ecf"},{class:"btn-save",text:"X\xe1c nh\u1eadn"}],this.listCreate=[]}ngOnInit(){this.data.Gender=this.data.account.gender,this.data.Email=this.data.account.email,this.data.ClassId=this.data.class._id,this.data.GradeId=this.data.class.grade_id,this.dataModel=this.data,this.listCreate=this.conFig.detailTeacher,this.listCreate[3].data=[{name:"Nam",value:1},{name:"N\u1eef",value:2}],console.log(this.dataModel),this.getGrade(this.dataModel.class.grade_id),this.getClassOfGrade(this.data.class.grade_id)}getClassOfGrade(t){this.schoolLevelGrade.getClassOfGrade(void 0,void 0,void 0,t).subscribe(i=>{this.listCreate[5].data=i.map(a=>({value:a._id,name:a.name}))})}getGrade(t){this.schoolLevelGrade.getGrade(void 0).subscribe(i=>{this.listCreate[4].data=i.map(a=>({value:a._id,name:a.name}))})}callBackHandle(t){"select-data"===t.type&&this.getClassOfGrade(+t.value)}handleCallbackEvent(t){"btn-cancel"===t.btn.class&&this.dialogRef.close(null),"btn-save"===t.btn.class&&(t.item.Gender=+t.item.Gender,t.item.ClassId=+t.item.ClassId,t.item.GradeId=+t.item.GradeId,this.memberService.editTeacher(t.item.TeacherId,t.item).subscribe(i=>{d().fire({position:"center",icon:"success",title:"S\u1eeda gi\xe1o vi\xean th\xe0nh c\xf4ng!",showConfirmButton:!1,timer:1500}),this.dialogRef.close()}))}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(w.n),e.Y36(u.a),e.Y36(s.so),e.Y36(s.WI))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-teacher"]],decls:2,vars:4,consts:[[3,"data","option","dataModel","arrayButton","dataChange","optionChange","dataModelChange","arrayButtonChange","callback","handleSelectChange"]],template:function(i,a){1&i&&(e._UZ(0,"app-loader"),e.TgZ(1,"app-create-form",0),e.NdJ("dataChange",function(l){return a.listCreate=l})("optionChange",function(l){return a.option=l})("dataModelChange",function(l){return a.dataModel=l})("arrayButtonChange",function(l){return a.arrayButton=l})("callback",function(l){return a.handleCallbackEvent(l)})("handleSelectChange",function(l){return a.callBackHandle(l)}),e.qZA()),2&i&&(e.xp6(1),e.Q6J("data",a.listCreate)("option",a.option)("dataModel",a.dataModel)("arrayButton",a.arrayButton))},dependencies:[b.I,C.R]})}return n})();var O=o(9109);let ut=(()=>{class n{constructor(t,i,a){this.dialog=t,this.memberService=i,this.employeeService=a,this.config=new p.m,this.listActive=[],this.dataModel={},this.data=[]}ngOnInit(){this.tableData=this.config.collumsTeacher,this.listActive=this.config.btnActiceTeacher,this.getListTeacher()}getListTeacher(){this.memberService.getTeacher().subscribe(t=>{null!==t&&(this.data=t.original,this.data.map((i,a)=>{i.ClassName=i.class.name,i.GenderString=1==i.account.gender?"Nam":"N\u1eef",i.LastName=i.account.full_name,i.LocationAddress=i.address,i.DOB=i.account.dob,i.Phone=i.account.user_name,i.stt=a+1})),console.log(t)})}handleTableCallback(t){return"create"===t.type?this.dialog.open(_t,{width:"500px",height:"750px"}).afterClosed().subscribe(i=>{this.getListTeacher()}):"edit"===t.type?this.dialog.open(bt,{width:"500px",height:"750px",data:t.item}).afterClosed().subscribe(i=>{this.getListTeacher()}):void("delete"===t.type&&d().fire({text:"B\u1ea1n mu\u1ed1n xo\xe1 gi\xe1o vi\xean n\xe0y kh\xf4ng?",showCancelButton:!0,cancelButtonColor:"#3085d6",confirmButtonColor:"#d33",cancelButtonText:"Hu\u1ef7",confirmButtonText:"Xo\xe1"}).then(i=>{i.isConfirmed&&this.employeeService.deleteEmployee(t.item.UserprofileId).subscribe(a=>{d().fire({position:"center",icon:"success",title:"Xo\xe1 th\xe0nh c\xf4ng!",showConfirmButton:!1,timer:1500}),this.getListTeacher()})}))}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(s.uw),e.Y36(w.n),e.Y36(O.G))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-teacher"]],decls:5,vars:3,consts:[[1,"teacher"],[1,"title"],[3,"data","tableData","listActive","callback"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," GI\xc1O VI\xcaN "),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"app-table",2),e.NdJ("callback",function(l){return a.handleTableCallback(l)}),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("data",a.data)("tableData",a.tableData)("listActive",a.listActive))},dependencies:[M.a],styles:[".teacher[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:26px;display:flex;align-items:center}.teacher[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:150px;height:30px;border:1px solid #50A0FC;border-radius:5px;margin-left:30px}"]})}return n})();var I=o(6223);function ft(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.selectItem(c))}),e.TgZ(1,"div",13),e._UZ(2,"img",14),e.qZA(),e.TgZ(3,"div",15)(4,"b"),e._uU(5),e.qZA(),e.TgZ(6,"b"),e._uU(7),e.qZA()()()}if(2&n){const t=r.$implicit;e.xp6(5),e.Oqu(t.LastName),e.xp6(2),e.hij("S\u0110T: ",t.Phone,"")}}function wt(n,r){if(1&n&&(e.TgZ(0,"div",10),e.YNc(1,ft,8,2,"div",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.result)}}function vt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",13),e._UZ(2,"img",14),e.qZA(),e.TgZ(3,"div",15)(4,"b"),e._uU(5),e.qZA(),e.TgZ(6,"b"),e._uU(7),e.qZA()(),e.TgZ(8,"div",17)(9,"button",18),e.NdJ("click",function(){const c=e.CHM(t).index,l=e.oxw();return e.KtG(l.removeItem(c))}),e._uU(10,"X\xf3a"),e.qZA()()()}if(2&n){const t=r.$implicit;e.xp6(5),e.Oqu(t.LastName),e.xp6(2),e.hij("S\u0110T: ",t.Phone,"")}}const xt=function(){return[]};let U=(()=>{class n{constructor(t,i,a){this.data=t,this.employeeService=i,this.dialogRef=a,this.listEmployee=[],this.result=[],this.listSelected=[]}ngOnInit(){this.getListEmployee()}getListEmployee(){this.employeeService.getListEmployee("").subscribe(t=>{this.listEmployee=t.map(i=>({LastName:i.full_name||"",MediaURL:i.MediaURL||"",Phone:i.phone,UserprofileId:i._id}))})}searchEmployee(t){if(t){this.result=this.listEmployee.filter(i=>i.LastName.toLowerCase().indexOf(t)>-1);for(let i=0;i<this.listSelected.length;i++){let a=this.listSelected[i].UserprofileId,c=this.result.findIndex(l=>l.UserprofileId===a);if(null==c)return this.result=[];this.result.splice(c,1),console.log(this.result)}}else this.result=[]}selectItem(t){this.search="",this.listSelected.push(t),this.result=[]}removeItem(t){this.listSelected.splice(t,1)}save(){let t=[];this.listSelected.forEach(a=>{t.push(a.UserprofileId)}),this.employeeService.assignPositionForEmployee({RoleId:this.data.RoleId,UserprofileIdList:t}).subscribe(a=>{d().fire({position:"center",icon:"success",title:"G\xe1n quy\u1ec1n th\xe0nh c\xf4ng!",showConfirmButton:!1,timer:1500}),this.dialogRef.close()})}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(s.WI),e.Y36(O.G),e.Y36(s.so))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-employee"]],decls:13,vars:4,consts:[[1,"add-employee"],[1,"title"],[1,"search-employee"],["placeholder","T\xecm ki\u1ebfm","type","search","name","","id","",1,"base-input","search-input",3,"ngModel","ngModelChange","input"],["class","search-list",4,"ngIf"],[1,"employee-list"],["class","employee-item",4,"ngFor","ngForOf"],[1,"group-btn"],[1,"btn-save",3,"click"],[1,"btn-cancel",3,"click"],[1,"search-list"],["class","employee-item",3,"click",4,"ngFor","ngForOf"],[1,"employee-item",3,"click"],[1,"avatar"],["src","assets/img/default-avatar.jpg","alt",""],[1,"info"],[1,"employee-item"],[1,"btn"],[3,"click"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," CH\u1eccN TH\xc0NH VI\xcaN "),e.qZA(),e.TgZ(3,"div",2)(4,"input",3),e.NdJ("ngModelChange",function(l){return a.search=l})("input",function(l){return a.searchEmployee(l.target.value)}),e.qZA(),e.YNc(5,wt,2,1,"div",4),e.qZA(),e.TgZ(6,"div",5),e.YNc(7,vt,11,2,"div",6),e.qZA(),e.TgZ(8,"div",7)(9,"button",8),e.NdJ("click",function(){return a.save()}),e._uU(10,"X\xe1c nh\u1eadn"),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){return a.closeDialog()}),e._uU(12,"H\u1ee7y"),e.qZA()()()),2&i&&(e.xp6(4),e.Q6J("ngModel",a.search),e.xp6(1),e.Q6J("ngIf",a.result!==e.DdM(3,xt)),e.xp6(2),e.Q6J("ngForOf",a.listSelected))},dependencies:[h.sg,h.O5,I.Fj,I.JJ,I.On],styles:[".add-employee[_ngcontent-%COMP%]{padding:15px;height:90%;position:relative}.add-employee[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;text-align:center;padding:5px 0;border-bottom:1px solid #707070}.add-employee[_ngcontent-%COMP%]   .search-employee[_ngcontent-%COMP%]{margin-top:15px;width:100%;display:flex;justify-content:center;position:relative}.add-employee[_ngcontent-%COMP%]   .search-employee[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{border-radius:20px;width:100%;font-size:16px;padding:0 10px 0 20px}.add-employee[_ngcontent-%COMP%]   .search-employee[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]{max-height:250px;overflow:auto;width:95%;box-shadow:0 0 3px 1px #8080804d;padding:0 10px;position:absolute;border:1px solid #e4e4e4;background:white;z-index:999;top:35px}.add-employee[_ngcontent-%COMP%]   .search-employee[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]{width:310px;border:1px solid #e4e4e4;height:55px;border-radius:35px;display:flex;align-items:center;position:relative;cursor:pointer;margin:10px 0}.add-employee[_ngcontent-%COMP%]   .search-employee[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;overflow:hidden;padding-left:10px}.add-employee[_ngcontent-%COMP%]   .search-employee[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.add-employee[_ngcontent-%COMP%]   .search-employee[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;margin-left:15px;flex-direction:column;line-height:25px}.add-employee[_ngcontent-%COMP%]   .search-employee[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;right:0;width:100px;border-radius:10px;background:none;text-align:center}.add-employee[_ngcontent-%COMP%]   .search-employee[_ngcontent-%COMP%]   .search-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:red;background:none;border:1px solid red;border-radius:5px;width:70px;height:25px}.add-employee[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]{max-height:280px;overflow:auto;margin-top:15px;padding:2px}.add-employee[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]{width:100%;border:1px solid #e4e4e4;height:55px;border-radius:35px;margin:10px 0;display:flex;align-items:center;position:relative;cursor:pointer}.add-employee[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;overflow:hidden;padding-left:10px}.add-employee[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.add-employee[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;margin-left:15px;flex-direction:column;line-height:25px}.add-employee[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;right:0;width:100px;border-radius:10px;background:none;text-align:center}.add-employee[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee-item[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:red;background:none;border:1px solid red;border-radius:5px;width:70px;height:25px}.add-employee[_ngcontent-%COMP%]   .group-btn[_ngcontent-%COMP%]{width:95%;position:absolute;bottom:10px}"]})}return n})(),kt=(()=>{class n{constructor(t,i){this.dialog=t,this.roleService=i,this.config=new p.m,this.listActive=[],this.dataModel={},this.data=[]}ngOnInit(){this.listActive=this.config.btnAdmin,this.tableData=this.config.collumsAdmin,this.getListRole()}getListRole(){this.roleService.getListRole().subscribe(t=>{let i=t.find(a=>"Admin"===a.Name);this.roleId=i.RoleId,this.getListUserOfAdmin(this.roleId)})}getListUserOfAdmin(t){this.roleService.getListEmployeeOfRole(t).subscribe(i=>{this.data=i,this.data.forEach((a,c)=>{a.stt=c+1})})}handleTableCallback(t){if("create"===t.type)return this.dialog.open(U,{width:"500px",height:"500px",data:{RoleId:this.roleId}}).afterClosed().subscribe(i=>{this.getListRole()})}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(s.uw),e.Y36(L.N))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-school-group-admin"]],decls:5,vars:3,consts:[[1,"teacher"],[1,"title"],[3,"data","tableData","listActive","callback"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Admin "),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"app-table",2),e.NdJ("callback",function(l){return a.handleTableCallback(l)}),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("data",a.data)("tableData",a.tableData)("listActive",a.listActive))},dependencies:[M.a],styles:[".teacher[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:26px;display:flex;align-items:center}.teacher[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:150px;height:30px;border:1px solid #50A0FC;border-radius:5px;margin-left:30px}"]})}return n})(),yt=(()=>{class n{constructor(t,i,a,c){this.dialogRef=t,this.employeeService=i,this.roleService=a,this.schoolLevelGrade=c,this.conFig=new p.m,this.dataModel={},this.checkFile={},this.error=[],this.option={title:"TH\xcaM TH\xc0NH VI\xcaN M\u1edaI",type:"create"},this.arrayButton=[{class:"btn-cancel",text:"H\u1ee7y b\u1ecf"},{class:"btn-save",text:"X\xe1c nh\u1eadn"}],this.listCreate=[]}ngOnInit(){this.listCreate=this.conFig.createEmployee,this.listCreate[5].data=[{name:"Nam",value:1},{name:"N\u1eef",value:2}],this.schoolLevelGrade.getGrade(void 0).subscribe(t=>{let i=t.map(a=>({name:a.name,value:a._id}));this.listCreate[6].data=i})}getClassOfGrade(t){this.schoolLevelGrade.getSubjectOfGrade(t).subscribe(i=>{this.listCreate[7].data=i.map(a=>({value:a._id,name:a.name}))})}callBackHandle(t){"select-data"===t.type?(console.log(t.item),this.getClassOfGrade(t.item.GradeId),this.dataModel=t.item):(this.dataModel=t.item,console.log(this.dataModel))}handleCallbackEvent(t){"btn-save"===t.btn.class?(console.log(t.item),this.employeeService.createEmployee({full_name:t.item.LastName,email:t.item.Email,user_name:t.item.UserName,gender:Number(t.item.Gender),phone:t.item.Phone,subject_id:t.item.SubjectId,dob:t.item.DOB,role_key:"TEACHER2",address:t.item.LocationAddress}).subscribe(i=>{d().fire({position:"center",icon:"success",title:"Th\xeam m\u1edbi th\xe0nh c\xf4ng!",showConfirmButton:!1,timer:1500}),this.dialogRef.close()},i=>{d().fire({position:"center",icon:"error",title:i.error.message,showConfirmButton:!1,timer:1500})})):this.dialogRef.close()}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(s.so),e.Y36(O.G),e.Y36(L.N),e.Y36(u.a))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-employee-create"]],decls:2,vars:5,consts:[[1,"create-employee"],[3,"data","option","error","dataModel","arrayButton","dataChange","optionChange","errorChange","dataModelChange","handleSelectChange","arrayButtonChange","callback"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"app-create-form",1),e.NdJ("dataChange",function(l){return a.listCreate=l})("optionChange",function(l){return a.option=l})("errorChange",function(l){return a.error=l})("dataModelChange",function(l){return a.dataModel=l})("handleSelectChange",function(l){return a.callBackHandle(l)})("arrayButtonChange",function(l){return a.arrayButton=l})("callback",function(l){return a.handleCallbackEvent(l)}),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("data",a.listCreate)("option",a.option)("error",a.error)("dataModel",a.dataModel)("arrayButton",a.arrayButton))},dependencies:[b.I]})}return n})(),H=(()=>{class n{constructor(t,i,a,c,l,m){this.dialogRef=t,this.data=i,this.employeeService=a,this.schoolLevelGrade=c,this.formatDateService=l,this.roleService=m,this.conFig=new p.m,this.dataModel={},this.option={title:"S\u1eecA TH\xd4NG TIN TH\xc0NH VI\xcaN",type:"create"},this.arrayButton=[{class:"btn-cancel",text:"H\u1ee7y b\u1ecf"},{class:"btn-save",text:"X\xe1c nh\u1eadn"}],this.listCreate=[]}ngOnInit(){var t=this;return(0,k.Z)(function*(){t.listCreate=t.conFig.editEmployee,t.dataModel={LastName:t.data.account.full_name,UserName:t.data.account.user_name,ParentName:t.data.parent_name,DOB:t.formatDateService.formatDate(t.data.account.birth_day,"YYYY-MM-DD"),GradeId:t.data.grades._id,SubjectId:t.data.subjects._id,LocationAddress:t.data.address,Gender:t.data.account.gender},t.listCreate[3].data=[{name:"Nam",value:1},{name:"N\u1eef",value:2}],t.schoolLevelGrade.getGrade(void 0).subscribe(i=>{let a=i.map(c=>({name:c.name,value:c._id}));t.listCreate[4].data=a}),t.getClassOfGrade(t.data.grades._id)})()}getClassOfGrade(t){this.schoolLevelGrade.getSubjectOfGrade(t).subscribe(i=>{this.listCreate[5].data=i.map(a=>({value:a._id,name:a.name}))})}callBackHandle(t){"select-data"===t.type?(console.log(t.item),this.getClassOfGrade(t.item.GradeId),this.dataModel=t.item):(this.dataModel=t.item,console.log(this.dataModel))}handleCallbackEvent(t){if("btn-save"===t.btn.class){const i=t.item.SubjectId;t.item.Gender=+t.item.Gender,this.employeeService.editEmployee(this.data._id,{account_id:this.data.account_id,email:t.item.Email,full_name:t.item.LastName,user_name:t.item.UserName,gender:t.item.Gender,phone:t.item.Phone,dob:t.item.DOB,address:t.item.LocationAddress,subject_id:i}).subscribe(a=>{d().fire({position:"center",icon:"success",title:"S\u1eeda th\xf4ng th\xe0nh c\xf4ng!",showConfirmButton:!1,timer:1500}),this.dialogRef.close()},a=>{d().fire({position:"center",icon:"error",title:a.error.message,showConfirmButton:!1,timer:1500}),this.dialogRef.close()})}else this.dialogRef.close()}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(s.so),e.Y36(s.WI),e.Y36(O.G),e.Y36(u.a),e.Y36(S.u),e.Y36(L.N))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-employee-edit"]],decls:1,vars:4,consts:[[3,"data","dataModel","option","arrayButton","dataChange","dataModelChange","optionChange","arrayButtonChange","handleSelectChange","callback"]],template:function(i,a){1&i&&(e.TgZ(0,"app-create-form",0),e.NdJ("dataChange",function(l){return a.listCreate=l})("dataModelChange",function(l){return a.dataModel=l})("optionChange",function(l){return a.option=l})("arrayButtonChange",function(l){return a.arrayButton=l})("handleSelectChange",function(l){return a.callBackHandle(l)})("callback",function(l){return a.handleCallbackEvent(l)}),e.qZA()),2&i&&e.Q6J("data",a.listCreate)("dataModel",a.dataModel)("option",a.option)("arrayButton",a.arrayButton)},dependencies:[b.I]})}return n})(),Ct=(()=>{class n{constructor(t){this.dialoRef=t,this.conFig=new p.m,this.dataModel={},this.checkFile={},this.option={title:"Import gi\xe1o vi\xean b\u1ed9 m\xf4n",type:"create"},this.arrayButton=[{class:"btn-cancel",text:"H\u1ee7y b\u1ecf"},{class:"btn-save",text:"L\u01b0u"}],this.listCreate=[]}ngOnInit(){this.listCreate=this.conFig.importDataEmployee}handleCallbackEvent(t){"btn-save"===t.btn.class&&this.dialoRef.close(t),"btn-cancel"===t.btn.class&&this.dialoRef.close(null)}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(s.so))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-import-employee"]],decls:1,vars:4,consts:[[3,"data","option","arrayButton","checkFile","dataChange","optionChange","arrayButtonChange","checkFileChange","callback"]],template:function(i,a){1&i&&(e.TgZ(0,"app-create-form",0),e.NdJ("dataChange",function(l){return a.listCreate=l})("optionChange",function(l){return a.option=l})("arrayButtonChange",function(l){return a.arrayButton=l})("checkFileChange",function(l){return a.checkFile=l})("callback",function(l){return a.handleCallbackEvent(l)}),e.qZA()),2&i&&e.Q6J("data",a.listCreate)("option",a.option)("arrayButton",a.arrayButton)("checkFile",a.checkFile)},dependencies:[b.I]})}return n})();var Mt=o(7371);const Tt=[{path:"",component:pt,children:[{path:"member-home",component:ht},{path:"member-home/class/:classId",component:it},{path:"member-home/list-grade/:schoolLevelId",component:ct},{path:"member-home/list-class/:gradeId",component:Y},{path:"member-home/list-class/user/:user_id",component:Y},{path:"member-home/school-group-member",component:gt},{path:"member-home/school-group-member/teacher",component:ut},{path:"member-home/school-group-member/admin",component:kt},{path:"member-home/school-group-member/employee",component:(()=>{class n{constructor(t,i,a,c,l){this.dialog=t,this.employeeService=i,this.formatDate=a,this.exportService=c,this.profileService=l,this.config=new p.m,this.listActive=[],this.data=[],this.dataModel={}}ngOnInit(){this.listActive=this.config.btnEmployee,this.tableData=this.config.collumsEmployee,this.getListEmployee()}incomingfile(t){let i=new FileReader;t&&(this.file=t.target.files[0],i.onload=a=>{this.arrayBuffer=i.result;for(var c=new Uint8Array(this.arrayBuffer),l=new Array,m=0;m!=c.length;++m)l[m]=String.fromCharCode(c[m]);var f=l.join(""),_=A.ij(f,{type:"binary"});this.dataImport=A.P6.sheet_to_json(_.Sheets[_.SheetNames[0]],{raw:!0}),this.handleDataImport(this.dataImport)},i.readAsArrayBuffer(this.file))}handleDataImport(t){let i=t.map(a=>({full_name:a["H\u1ecd v\xe0 t\xean"],email:a.Email,user_name:a["T\xean \u0111\u0103ng nh\u1eadp"],gender:"Nam"==a["Gi\u1edbi t\xednh"]?1:2,phone:a.S\u0110T,subject_key:this.profileService.regexVietnamese(`lop${a.Kh\u1ed1i}-${a["M\xf4n h\u1ecdc"].replace(" ","").replace(" ","").replace(" ","").replace(" ","")}`),grade_name:a.Kh\u1ed1i,dob:R(a["Ng\xe0y sinh"],"DD/MM/YYYY").format("YYYY-MM-DD"),role_key:"TEACHER2",address:a["\u0110\u1ecba ch\u1ec9"]}));this.employeeService.createManyEmployee(i).subscribe(a=>{window.location.reload()})}getListEmployee(){this.employeeService.getListEmployee("").subscribe(t=>{this.data=t.original,this.data.map((i,a)=>{i.GenderString=1==i.account.gender?"Nam":"N\u1eef",i.SubjectName=i.subjects.name,i.GradeName=i.grades.name,i.StudentCode=i.student_code,i.UserName=i.account.user_name,i.LocationAddress=i.address,i.LastName=i.account.full_name,i.DOB=i.account.birth_day?this.formatDate.formatDate(i.account.birth_day,"DD-MM-YYYY"):null,i.stt=a+1})})}handleTableCallback(t){return"create"===t.type?this.dialog.open(yt,{width:"500px",height:"750px"}).afterClosed().subscribe(i=>{this.getListEmployee()}):"edit"===t.type?this.dialog.open(H,{width:"500px",height:"750px",data:t.item}).afterClosed().subscribe(i=>{this.getListEmployee()}):"upload-file"===t.type?this.dialog.open(Ct,{width:"500px",height:"300px",disableClose:!0,data:t.item}).afterClosed().subscribe(i=>{null!==i&&this.incomingfile(i.file)}):("delete-all"===t.type&&d().fire({text:"B\u1ea1n mu\u1ed1n xo\xe1 th\xf4ng b\xe1o n\xe0y kh\xf4ng?",showCancelButton:!0,cancelButtonColor:"#3085d6",confirmButtonColor:"#d33",cancelButtonText:"Hu\u1ef7",confirmButtonText:"Xo\xe1"}).then(i=>{if(i.isConfirmed){for(let a=0;a<t.item.length;a++)this.employeeService.deleteEmployee(t.item[a].UserprofileId).subscribe(c=>{this.getListEmployee()});d().fire({position:"center",icon:"success",title:"Xo\xe1 th\xe0nh c\xf4ng!",showConfirmButton:!1,timer:1500})}}),void("delete"===t.type&&d().fire({text:"B\u1ea1n mu\u1ed1n xo\xe1 gi\xe1o vi\xean n\xe0y kh\xf4ng?",showCancelButton:!0,cancelButtonColor:"#3085d6",confirmButtonColor:"#d33",cancelButtonText:"Hu\u1ef7",confirmButtonText:"Xo\xe1"}).then(i=>{i.isConfirmed&&this.employeeService.deleteEmployee(t.item._id).subscribe(a=>{d().fire({position:"center",icon:"success",title:"Xo\xe1 th\xe0nh c\xf4ng!",showConfirmButton:!1,timer:1500}),this.getListEmployee()})})))}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(s.uw),e.Y36(O.G),e.Y36(S.u),e.Y36(Z.d),e.Y36(Mt.H))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-employee"]],decls:5,vars:3,consts:[[1,"employee"],[1,"title"],[3,"data","tableData","listActive","callback"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Danh s\xe1ch gi\xe1o vi\xean b\u1ed9 m\xf4n "),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"app-table",2),e.NdJ("callback",function(l){return a.handleTableCallback(l)}),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("data",a.data)("tableData",a.tableData)("listActive",a.listActive))},dependencies:[M.a],styles:[".employee[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:26px;font-weight:600}"]})}return n})()},{path:"member-home/school-group-member/role/:roleId",component:(()=>{class n{constructor(t,i,a){this.dialog=t,this.roleService=i,this.activeRouter=a,this.config=new p.m,this.listActive=[],this.dataModel={},this.data=[]}ngOnInit(){this.roleId=+this.activeRouter.snapshot.params.roleId,this.listActive=this.config.btnAdmin,this.tableData=this.config.collumsAdmin,this.getListRole()}getListRole(){this.roleService.getListRole().subscribe(t=>{let i=t.find(a=>a.RoleId===this.roleId);this.roleName=i.Name,this.getListUserOfRole(this.roleId)})}getListUserOfRole(t){this.roleService.getListEmployeeOfRole(t).subscribe(i=>{this.data=i,this.data.forEach((a,c)=>{a.stt=c+1})})}handleTableCallback(t){return"create"===t.type?this.dialog.open(U,{width:"500px",height:"500px",data:{RoleId:this.roleId}}).afterClosed().subscribe(i=>{this.getListRole()}):"edit"===t.type?this.dialog.open(H,{width:"500px",height:"750px",data:t.item}).afterClosed().subscribe(i=>{this.getListRole()}):void 0}static#t=this.\u0275fac=function(i){return new(i||n)(e.Y36(s.uw),e.Y36(L.N),e.Y36(g.gz))};static#e=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-member-role-detail"]],decls:5,vars:4,consts:[[1,"teacher"],[1,"title"],[3,"data","tableData","listActive","callback"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"app-table",2),e.NdJ("callback",function(l){return a.handleTableCallback(l)}),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",a.roleName," fff "),e.xp6(2),e.Q6J("data",a.data)("tableData",a.tableData)("listActive",a.listActive))},dependencies:[M.a],styles:[".teacher[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:26px;display:flex;align-items:center}.teacher[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:150px;height:30px;border:1px solid #50A0FC;border-radius:5px;margin-left:30px}"]})}return n})()},{path:"",redirectTo:"member-home",pathMatch:"full"}]}];o(2495),o(2831);var x=o(3680),J=(o(7394),o(3019),o(8645),o(7131));let St=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[x.BQ,x.BQ]})}return n})();o(4191),o(8337),o(6028),o(9773);let de=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[J.Q8,h.ez,x.BQ,x.si,x.us,St]})}return n})(),oe=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[h.ez,g.Bz.forChild(Tt),b.D,C.q,F.Cq,de,T.h,I.u5,s.Is,M.m]})}return n})()},756:(G,y,o)=>{o.d(y,{N:()=>p});var h=o(7398),g=o(5879),k=o(9862);let p=(()=>{class s{constructor(d){this.http=d}getListRole(){return this.http.get("auth/allrole").pipe((0,h.U)(d=>d))}createRole(d){return this.http.post("api/role",d).pipe((0,h.U)(e=>e))}editRole(d,e){return this.http.put(`api/role/${d}`,e).pipe((0,h.U)(w=>w))}listRoleSchoolOfStudent(d){return this.http.get(`api/RoleSchoolLevelPrivilege/SchoolLevel?RoleId=${d}`).pipe((0,h.U)(e=>e.Payload))}listRoleSchool(d){return this.http.get(`api/RoleSchoolLevelPrivilege?RoleId=${d}`).pipe((0,h.U)(e=>e.Payload))}getListEmployeeOfRole(d){return this.http.get(`api/userprofile/role/${d}`).pipe((0,h.U)(e=>e.Payload))}assignRoleForEmployee(d){return this.http.post("api/userprofile/assignRole",d).pipe((0,h.U)(e=>e))}assignPrivilegeForPosition(d){return this.http.post("api/RoleSchoolLevelPrivilege",d).pipe((0,h.U)(e=>e))}deleteRole(d){return this.http.delete(`api/Role/${d}`).pipe((0,h.U)(e=>e))}static#t=this.\u0275fac=function(e){return new(e||s)(g.LFG(k.eN))};static#e=this.\u0275prov=g.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()}}]);